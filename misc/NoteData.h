#pragma once

// Notes are separated by "semitone" intervals.
// There are 12 seimtones in each octave, and fundamental frequencies are logarithmically spaced,
// so the fundamental frequency of each note is 2(1/12) = 1.0595 times the previous frequency.
// 1145 * .9405 ==

#include <stdint.h>
#include "utils.h"

#define NOTE_DATA_LENGTH 120

enum Note {
    C0 = 0,
    C0_SHARP = 1,
    D0 = 2,
    D0_SHARP = 3,
    E0 = 4,
    F0 = 5,
    F0_SHARP = 6,
    G0 = 7,
    G0_SHARP = 8,
    A0 = 9,
    A0_SHARP = 10,
    B0 = 11,
    C1 = 12,
    C1_SHARP = 13,
    D1 = 14,
    D1_SHARP = 15,
    E1 = 16,
    F1 = 17,
    F1_SHARP = 18,
    G1 = 19,
    G1_SHARP = 20,
    A1 = 21,
    A1_SHARP = 22,
    B1 = 23,
    C2 = 24,
    C2_SHARP = 25,
    D2 = 26,
    D2_SHARP = 27,
    E2 = 28,
    F2 = 29,
    F2_SHARP = 30,
    G2 = 31,
    G2_SHARP = 32,
    A2 = 33,
    A2_SHARP = 34,
    B2 = 35,
    C3 = 36,
    C3_SHARP = 37,
    D3 = 38,
    D3_SHARP = 39,
    E3 = 40,
    F3 = 41,
    F3_SHARP = 42,
    G3 = 43,
    G3_SHARP = 44,
    A3 = 45,
    A3_SHARP = 46,
    B3 = 47,
    C4 = 48,
    C4_SHARP = 49,
    D4 = 50,
    D4_SHARP = 51,
    E4 = 52,
    F4 = 53,
    F4_SHARP = 54,
    G4 = 55,
    G4_SHARP = 56,
    A4 = 57,
    A4_SHARP = 58,
    B4 = 59,
    C5 = 60,
    C5_SHARP = 61,
    D5 = 62,
    D5_SHARP = 63,
    E5 = 64,
    F5 = 65,
    F5_SHARP = 66,
    G5 = 67,
    G5_SHARP = 68,
    A5 = 69,
    A5_SHARP = 70,
    B5 = 71,
    C6 = 72,
    C6_SHARP = 73,
    D6 = 74,
    D6_SHARP = 75,
    E6 = 76,
    F6 = 77,
    F6_SHARP = 78,
    G6 = 79,
    G6_SHARP = 80,
    A6 = 81,
    A6_SHARP = 82,
    B6 = 83,
    C7 = 84,
    C7_SHARP = 85,
    D7 = 86,
    D7_SHARP = 87,
    E7 = 88,
    F7 = 89,
    F7_SHARP = 90,
    G7 = 91,
    G7_SHARP = 92,
    A7 = 93,
    A7_SHARP = 94,
    B7 = 95,
    C8 = 96,
    C8_SHARP = 97,
    D8 = 98,
    D8_SHARP = 99,
    E8 = 100,
    F8 = 101,
    F8_SHARP = 102,
    G8 = 103,
    G8_SHARP = 104,
    A8 = 105,
    A8_SHARP = 106,
    B8 = 107,
    C9 = 108,
    C9_SHARP = 109,
    D9 = 110,
    D9_SHARP = 111,
    E9 = 112,
    F9 = 113,
    F9_SHARP = 114,
    G9 = 115,
    G9_SHARP = 116,
    A9 = 117,
    A9_SHARP = 118,
    B9 = 119
};

typedef struct
{
    float frequency;
    uint8_t midi;
} NoteData;

const NoteData NOTE_DATA_MAP[NOTE_DATA_LENGTH] = {
    {16.352, 12}, // C0
    {17.324, 13}, // C#0/Db0
    {18.354, 14}, // D0
    {19.445, 15}, // D#0/Eb0
    {20.602, 16}, // E0
    {21.827, 17}, // F0
    {23.125, 18}, // F#0/Gb0
    {24.500, 19}, // G0
    {25.957, 20}, // G#0/Ab0
    {27.500, 21}, // A0
    {29.135, 22}, // A#0/Bb0
    {30.868, 23}, // B0
    {32.70, 24},  // C1
    {34.65, 25},  // C#1/Db1
    {36.71, 26},  // D1
    {38.89, 27},  // D#1/Eb1
    {41.20, 28},  // E1
    {43.65, 29},  // F1
    {46.25, 30},  // F#1/Gb1
    {49.00, 31},  // G1
    {51.91, 32},  // G#1/Ab1
    {55.00, 33},  // A1
    {58.27, 34},  // A#1/Bb1
    {61.74, 35},  // B1
    {65.41, 36},  // C2
    {69.30, 37},  // C#2/Db2
    {73.42, 38},  // D2
    {77.78, 39},  // D#2/Eb2
    {82.41, 40},  // E2
    {87.31, 41},  // F2
    {92.50, 42},  // F#2/Gb2
    {98.00, 43},  // G2
    {103.83, 44}, // G#2/Ab2
    {110.00, 45}, // A2
    {116.54, 46}, // A#2/Bb2
    {123.47, 47}, // B2
    {130.81, 48}, // C3
    {138.59, 49}, // C#3/Db3
    {146.83, 50}, // D3
    {155.56, 51}, // D#3/Eb3
    {164.81, 52}, // E3
    {174.61, 53}, // F3
    {185.00, 54}, // F#3/Gb3
    {196.00, 55}, // G3
    {207.65, 56}, // G#3/Ab3
    {220.00, 57}, // A3
    {233.08, 58}, // A#3/Bb3
    {246.94, 59}, // B3
    {261.63, 60}, // C4
    {277.18, 61}, // C#4/Db4
    {293.66, 62}, // D4
    {311.13, 63}, // D#4/Eb4
    {329.63, 64}, // E4
    {349.23, 65}, // F4
    {369.99, 66}, // F#4/Gb4
    {392.00, 67}, // G4
    {415.30, 68}, // G#4/Ab4
    {440.00, 69}, // A4
    {466.16, 70}, // A#4/Bb4
    {493.88, 71}, // B4
    {523.25, 72}, // C5
    {554.37, 73}, // C#5/Db5
    {587.33, 74}, // D5
    {622.25, 75}, // D#5/Eb5
    {659.26, 76}, // E5
    {698.46, 77}, // F5
    {739.99, 78}, // F#5/Gb5
    {783.99, 79}, // G5
    {830.61, 80}, // G#5/Ab5
    {880.00, 81}, // A5
    {932.33, 82}, // A#5/Bb5
    {987.77, 83}, // B5
    {1046.50, 84}, // C6
    {1108.73, 85}, // C#6/Db6
    {1174.66, 86}, // D6
    {1244.51, 87}, // D#6/Eb6
    {1318.51, 88}, // E6
    {1396.91, 89}, // F6
    {1479.98, 90}, // F#6/Gb6
    {1567.98, 91}, // G6
    {1661.22, 92}, // G#6/Ab6
    {1760.00, 93}, // A6
    {1864.66, 94}, // A#6/Bb6
    {1975.53, 95}, // B6
    {2093.00, 96}, // C7
    {2217.46, 97}, // C#7/Db7
    {2349.32, 98}, // D7
    {2489.02, 99}, // D#7/Eb7
    {2637.02, 100}, // E7
    {2793.83, 101}, // F7
    {2959.96, 102}, // F#7/Gb7
    {3135.96, 103}, // G7
    {3322.44, 104}, // G#7/Ab7
    {3520.00, 105}, // A7
    {3729.31, 106}, // A#7/Bb7
    {3951.07, 107}, // B7
    {4186.01, 108}, // C8
    {4434.92, 109}, // C#8/Db8
    {4698.64, 110}, // D8
    {4978.03, 111}, // D#
    {5274.04, 112}, // E8
    {5587.65, 113}, // F8
    {5919.91, 114}, // F#8/Gb8
    {6271.93, 115}, // G8
    {6644.88, 116}, // G#8/Ab8
    {7040.00, 117}, // A8
    {7458.62, 118}, // A#8/Bb8
    {7902.13, 119}, // B8
    {8372.02, 120}, // C9
    {8869.84, 121}, // C#9/Db9
    {9397.27, 122}, // D9
    {9956.06, 123}, // D#9/Eb9
    {10548.08, 124}, // E9
    {11175.30, 125}, // F9
    {11839.82, 126}, // F#9/Gb9
    {12543.86, 127}, // G9
    {13289.76, 128}, // G#9/Ab9
    {14080.00, 129}, // A9
    {14917.24, 130}, // A#9/Bb9
    {15804.26, 131} // B9
};

const float NOTE_FREQ_MAP[NOTE_DATA_LENGTH] = {
    16.352,  //  C0
    17.324,  //  C#0/Db0
    18.354,  //  D0
    19.445,  //  D#0/Eb0
    20.602,  //  E0
    21.827,  //  F0
    23.125,  //  F#0/Gb0
    24.500,  //  G0
    25.957,  //  G#0/Ab0
    27.500,  //  A0
    29.135,  //  A#0/Bb0
    30.868,  //  B0
    32.70,   //  C1
    34.65,   //  C#1/Db1
    36.71,   //  D1
    38.89,   //  D#1/Eb1
    41.20,   //  E1
    43.65,   //  F1
    46.25,   //  F#1/Gb1
    49.00,   //  G1
    51.91,   //  G#1/Ab1
    55.00,   //  A1
    58.27,   //  A#1/Bb1
    61.74,   //  B1
    65.41,   //  C2
    69.30,   //  C#2/Db2
    73.42,   //  D2
    77.78,   //  D#2/Eb2
    82.41,   //  E2
    87.31,   //  F2
    92.50,   //  F#2/Gb2
    98.00,   //  G2
    103.83,  //  G#2/Ab2
    110.00,  //  A2
    116.54,  //  A#2/Bb2
    123.47,  //  B2
    130.81,  //  C3
    138.59,  //  C#3/Db3
    146.83,  //  D3
    155.56,  //  D#3/Eb3
    164.81,  //  E3
    174.61,  //  F3
    185.00,  //  F#3/Gb3
    196.00,  //  G3
    207.65,  //  G#3/Ab3
    220.00,  //  A3
    233.08,  //  A#3/Bb3
    246.94,  //  B3
    261.63,  //  C4
    277.18,  //  C#4/Db4
    293.66,  //  D4
    311.13,  //  D#4/Eb4
    329.63,  //  E4
    349.23,  //  F4
    369.99,  //  F#4/Gb4
    392.00,  //  G4
    415.30,  //  G#4/Ab4
    440.00,  //  A4
    466.16,  //  A#4/Bb4
    493.88,  //  B4
    523.25,  //  C5
    554.37,  //  C#5/Db5
    587.33,  //  D5
    622.25,  //  D#5/Eb5
    659.26,  //  E5
    698.46,  //  F5
    739.99,  //  F#5/Gb5
    783.99,  //  G5
    830.61,  //  G#5/Ab5
    880.00,  //  A5
    932.33,  //  A#5/Bb5
    987.77,  //  B5
    1046.50, //  C6
    1108.73, //  C#6/Db6
    1174.66, //  D6
    1244.51, //  D#6/Eb6
    1318.51, //  E6
    1396.91, //  F6
    1479.98, //  F#6/Gb6
    1567.98, //  G6
    1661.22, //  G#6/Ab6
    1760.00, //  A6
    1864.66, //  A#6/Bb6
    1975.53, //  B6
    2093.00, //  C7
    2217.46, //  C#7/Db7
    2349.32, //  D7
    2489.02, //  D#7/Eb7
    2637.02, //  E7
    2793.83, //  F7
    2959.96, //  F#7/Gb7
    3135.96, //  G7
    3322.44, //  G#7/Ab7
    3520.00, //  A7
    3729.31, //  A#7/Bb7
    3951.07, //  B7
    4186.01, //  C8
    4434.92, //  C#8/Db8
    4698.64, //  D8
    4978.03, //  D#8/Eb8
    5274.04, //  E8
    5587.65, //  F8
    5919.91, //  F#8/Gb8
    6271.93, //  G8
    6644.88, //  G#8/Ab8
    7040.00, //  A8
    7458.62, //  A#8/Bb8
    7902.13,  //  B8
    8372.02, //  C9
    8869.84, //  C#9/Db9
    9397.27, //  D9
    9956.06, //  D#9/Eb9
    10548.08, //  E9
    11175.30, //  F9
    11839.82, //  F#9/Gb9
    12543.86, //  G9
    13289.76, //  G#9/Ab9
    14080.00, //  A9
    14917.24, //  A#9/Bb9
    15804.26 //  B9
};

float getNoteFrequency(Note note);

uint8_t getNoteMidi(Note note);

Note getNoteIndexFromMidi(uint8_t midi);